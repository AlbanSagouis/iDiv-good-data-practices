% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={A Minimal Book Example},
  pdfauthor={Yihui Xie},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs}
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\usepackage{amsthm}
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=8pt plus 2pt minus 4pt
  \thm@postskip=\thm@preskip
}
\makeatother
\usepackage[]{natbib}
\bibliographystyle{apalike}

\title{A Minimal Book Example}
\author{Yihui Xie}
\date{2020-12-04}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{prerequisites}{%
\chapter{Prerequisites}\label{prerequisites}}

This is a \emph{sample} book written in \textbf{Markdown}. You can use anything that Pandoc's Markdown supports, e.g., a math equation \(a^2 + b^2 = c^2\).

The \textbf{bookdown} package can be installed from CRAN or Github:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"bookdown"}\NormalTok{)}
\CommentTok{# or the development version}
\CommentTok{# devtools::install_github("rstudio/bookdown")}
\end{Highlighting}
\end{Shaded}

Remember each Rmd file contains one and only one chapter, and a chapter is defined by the first-level heading \texttt{\#}.

To compile this example to PDF, you need XeLaTeX. You are recommended to install TinyTeX (which includes XeLaTeX): \url{https://yihui.name/tinytex/}.

\hypertarget{intro}{%
\chapter{Introduction}\label{intro}}

You can label chapter and section titles using \texttt{\{\#label\}} after them, e.g., we can reference Chapter \ref{intro}. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter \ref{methods}.

Figures and tables with captions will be placed in \texttt{figure} and \texttt{table} environments, respectively.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{par}\NormalTok{(}\DataTypeTok{mar =} \KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{4}\NormalTok{, }\FloatTok{.1}\NormalTok{, }\FloatTok{.1}\NormalTok{))}
\KeywordTok{plot}\NormalTok{(pressure, }\DataTypeTok{type =} \StringTok{'b'}\NormalTok{, }\DataTypeTok{pch =} \DecValTok{19}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}

{\centering \includegraphics[width=0.8\linewidth]{bookdown-demo_files/figure-latex/nice-fig-1} 

}

\caption{Here is a nice figure!}\label{fig:nice-fig}
\end{figure}

Reference a figure by its code chunk label with the \texttt{fig:} prefix, e.g., see Figure \ref{fig:nice-fig}. Similarly, you can reference tables generated from \texttt{knitr::kable()}, e.g., see Table \ref{tab:nice-tab}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{knitr}\OperatorTok{::}\KeywordTok{kable}\NormalTok{(}
  \KeywordTok{head}\NormalTok{(iris, }\DecValTok{20}\NormalTok{), }\DataTypeTok{caption =} \StringTok{'Here is a nice table!'}\NormalTok{,}
  \DataTypeTok{booktabs =} \OtherTok{TRUE}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}

\caption{\label{tab:nice-tab}Here is a nice table!}
\centering
\begin{tabular}[t]{rrrrl}
\toprule
Sepal.Length & Sepal.Width & Petal.Length & Petal.Width & Species\\
\midrule
5.1 & 3.5 & 1.4 & 0.2 & setosa\\
4.9 & 3.0 & 1.4 & 0.2 & setosa\\
4.7 & 3.2 & 1.3 & 0.2 & setosa\\
4.6 & 3.1 & 1.5 & 0.2 & setosa\\
5.0 & 3.6 & 1.4 & 0.2 & setosa\\
\addlinespace
5.4 & 3.9 & 1.7 & 0.4 & setosa\\
4.6 & 3.4 & 1.4 & 0.3 & setosa\\
5.0 & 3.4 & 1.5 & 0.2 & setosa\\
4.4 & 2.9 & 1.4 & 0.2 & setosa\\
4.9 & 3.1 & 1.5 & 0.1 & setosa\\
\addlinespace
5.4 & 3.7 & 1.5 & 0.2 & setosa\\
4.8 & 3.4 & 1.6 & 0.2 & setosa\\
4.8 & 3.0 & 1.4 & 0.1 & setosa\\
4.3 & 3.0 & 1.1 & 0.1 & setosa\\
5.8 & 4.0 & 1.2 & 0.2 & setosa\\
\addlinespace
5.7 & 4.4 & 1.5 & 0.4 & setosa\\
5.4 & 3.9 & 1.3 & 0.4 & setosa\\
5.1 & 3.5 & 1.4 & 0.3 & setosa\\
5.7 & 3.8 & 1.7 & 0.3 & setosa\\
5.1 & 3.8 & 1.5 & 0.3 & setosa\\
\bottomrule
\end{tabular}
\end{table}

You can write citations, too. For example, we are using the \textbf{bookdown} package \citep{R-bookdown} in this sample book, which was built on top of R Markdown and \textbf{knitr} \citep{xie2015}.

\hypertarget{structuring-saving-and-opening-tables}{%
\chapter{Structuring, saving and opening tables}\label{structuring-saving-and-opening-tables}}

\hypertarget{rule-of-thumb}{%
\section{Rule of thumb}\label{rule-of-thumb}}

Before beginning working and modifying a table either with a programming language or with a spreadsheet software, always check data integrity.

\hypertarget{language}{%
\section{Language}\label{language}}

Using English is a necessity to share data between colleagues from the team and colleagues internationally. When naming files, variables or categories, you should use either American or British spelling in a consistent manner. A choice could be made at team level that everybody follows.

\hypertarget{header-style}{%
\section{Header style}\label{header-style}}

Dot, under slash or camel?
\#\# Number spacing
Writing large numbers as ``4,000,000'' or ``4 000 000'' or letting your spreadsheet software save data in that format is source of problems.

\hypertarget{decimal}{%
\section{Decimal}\label{decimal}}

Should always be ``.''.

\hypertarget{separator}{%
\section{Separator}\label{separator}}

The comma is the preferred delimiter in the US while European countries often prefer the semicolon because comma is often used as the decimal delimiter. When entering data in Excel and some cells contain text including typographic characters such as commas, semicolons, apostrophe and others, Excel will encapsulate the cell between quotation marks when saving in csv. R write.csv() and write.csv2() will also. R write.table() does not by default but the argument qmethod can be set to ``double'' (this is the default in write.csv()).

\hypertarget{encoding}{%
\section{Encoding}\label{encoding}}

Using the same encoding everywhere is good practice but in case of sharing data with other people, specifying the encoding in the filename, in the metadata or in the first line of a table is useful. See section Good versioning practices, page 3.
R can write.table() with an encoding that Excel reads by default on a Windows machine (fileEncoding = ``WINDOWS-1252''). But it is not the standard encoding on other platforms.
\textbf{Warning}: if you open a file encoded in UTF-8 in Excel directly and then save it, Excel will open and save using the encoding ``WINDOWS-1252'' and will make encoding mistakes if there are special characters. Open properly an UTF-8 encoded file by opening a new spreadsheet, data \textgreater{} Get data from Text/CSV and choose the proper encoding option.

\hypertarget{filename}{%
\section{Filename}\label{filename}}

Use meaningful names.
\textbf{Windows}: you can make Windows always display file extensions to easily see differences between file formats. In Windows 10, from any Explorer window, View tab, Filename extensions.

\hypertarget{date-format}{%
\section{Date format}\label{date-format}}

Specify the format in the metadata and preferably use ddmmyyyy; even better with separators but be consistent.

\#\#When working with people outside of the team
When beginning a collaboration with people, take time to discuss and agree on a data management plan to avoid interoperability issues and data corruption or loss.

\hypertarget{metadata}{%
\chapter{Metadata}\label{metadata}}

\hypertarget{variable-names}{%
\section{Variable names}\label{variable-names}}

Dot, under slash or camel?
\#\# Categories
Spaces or dots\ldots{}
Be careful to plural forms: choose either singular or plural and be consistent. Singular often makes more sense. Always check categories with pivot tables or duplicate removal.
Be careful to capital letters: decide to capitalize or not and be consistent.
Darwin Core and GBIF

\hypertarget{taxonomy}{%
\chapter{Taxonomy}\label{taxonomy}}

Binomial names, author should be in a separate column. Another additional column might give the category of name: binomial, binomial+subspecies, genus sp. (no genus alone), family, common name, morphospecies (family msp., genus msp.), morphospecies nickname, var., aff., new species, new genus.
Darwin Core Taxa?

\hypertarget{organising-your-data}{%
\chapter{Organising your data}\label{organising-your-data}}

\hypertarget{good-backing-up-practices}{%
\section{Good backing-up practices}\label{good-backing-up-practices}}

Back-ups are useful when a file was accidently deleted, a file is modified and no previous version is available or your computer is lost, stolen or corrupted. Ideally the back-ups should be kept in different places. You can back-up your current files on the network; heavier and older files can be stored on external memory supports but it should not be kept in the same building as your main memory. Use a back-up software to automatically back-up files on the network or on an external hard-drive (examples). WHAT IS IDIV POLICY ON BACKUP? DO THEY BACKUP THEIR SERVERS?
H and I are backed up daily. I can be used for long term storage. And they have history versions.
Nextcloud may be used as a backup solution but the server is backed up only once a week and there is no history, only the most recent version of files is saved. It goes over the Internet and does not need to be connected to iDiv network.

\hypertarget{good-versioning-practices}{%
\section{Good versioning practices}\label{good-versioning-practices}}

Adding the number of the version in the filename. Creating a new version can be done on a regular basis, every day or week, or when critical changes are made to the code. In any case, documenting modifications and new features is necessary.
Documenting the version changes, a versioning.txt file can be used for each file but it can be lost.
* in an Excel file, use an additional sheet
* in a csv, write a description and a version description in the first line that will then be skipped by R (skip argument in read.table(), data.table::fread() and others).
* In a script, write a description and a version description at the top of the file.
* git
* csvy

\hypertarget{submitting-data-set}{%
\chapter{Submitting data set}\label{submitting-data-set}}

\hypertarget{ecology-data-paper-submission-process}{%
\section{Ecology data paper submission process}\label{ecology-data-paper-submission-process}}

Cover Letter
2 reviewers

data can be provided zipped as a Multimedia Supporting Information for Review and publication.

double line space, Times New Roman 12
line numbers after the end of the institution list
in the metadata, figures and tables should be placed in the body of the manuscript, not at the end.

the article is intially submitted as the main document and once accepted, the template for the abstract is provided by Ecology and the abstract becomes the main document and the data set and the metadata become appendices.

\hypertarget{dryad-submission-process}{%
\section{Dryad submission process}\label{dryad-submission-process}}

120\$
readme files to describe the project and the tables. I put variable definition tables for fragsad

DOI is automatically attributed when submitting.

\hypertarget{sharing-is-caring}{%
\chapter{Sharing is caring}\label{sharing-is-caring}}

\hypertarget{free-versus-proprietary-formats}{%
\section{Free versus proprietary formats}\label{free-versus-proprietary-formats}}

Here is a table provided by the Boston College Libraries website
To prevent data from being lost to incompatibility, store it as formats and on hardware that are open standard, not proprietary.
Type of Data Recommended Format Avoid These Formats
Plain Text .txt .docx, .doc, .rtf
Tabular Text .csv, .tsv .xlsx, .xls
Image .jp2, .tiff .jpg, .psd
Documents .pdf/a, .epub .azw
Archiving .zip .rar
Storage Cloud, iDiv servers, iDiv data repository CD-Rom

\hypertarget{working-together}{%
\section{Working together}\label{working-together}}

When collaborating for analysing data and writing an article, preferably use open formats such as OpenDocuments (.odt) or Latex (.tex). In ecology, these formats are often disregarded because Microsoft Office is widely available and taking into account the difficulty for colleagues to buy a license is not obvious (Linux users?). LaTeX is often disregarded as reviewing tools are not as practical as they are in classical text editors.
Online tools (such as Google Documents, Dropbox Papers\ldots) offer free, synchronized text editors with correct editing tools and reviewing possibilities.
Synchronising and sharing files between iDiv members should be done with Nextcloud rather than Dropbox. In these solutions, when two people work on the same file, the one that save the file last will usually erase the older file. Adding your initials at the end, incrementing the version number or communicating to prevent working on the same files at the same time is good practice.

\hypertarget{git}{%
\section{Git}\label{git}}

Take the iDiv git training

\hypertarget{r}{%
\section{R}\label{r}}

Modifying your profile file in R offers practical advantages but using it to load functions or change options when opening R is source of issues when you share your code. Functions should be sourced within shared scripts and their code provided directly or in a package.
Commenting code helps reviewing code and understanding it, and is a necessity when sharing code.
Setwd?

\hypertarget{sharing-a-good-reproducible-example}{%
\section{Sharing a good reproducible example}\label{sharing-a-good-reproducible-example}}

Sharing code to reproduce an error or ask a solution is critical.
?structure

\hypertarget{resources}{%
\chapter{Resources}\label{resources}}

\url{https://library.stanford.edu/research/data-management-services/data-best-practices}
Long-term planning
\#\# Document your plan
Once you have started to implement best practices for yourself and your research group, make an effort to document these plans. Include your and your group's procedures for the following:
+ Naming files
+ Saving and backing up files
+ Describing data files
+ Tracking versions
You might consider using a wiki or a Google doc that everyone in your group can access when needed. Be sure to define who is responsible for each task and for setting the overall policies.

\hypertarget{plan-for-knowledge-transfer}{%
\section{Plan for knowledge transfer}\label{plan-for-knowledge-transfer}}

As a last step, don't forget to create and implement a plan for how to transfer knowledge about a project when it changes hands or when someone leaves the group. This will help prevent valuable information from getting lost!

\hypertarget{when-applying-for-a-grant}{%
\section{When applying for a grant}\label{when-applying-for-a-grant}}

Funding institutions often ask for a Data managing Plan. You can use the DMP tool from University of California to do that: \url{https://dmptool.org/}

\hypertarget{additional-resources}{%
\section{Additional Resources}\label{additional-resources}}

Want to learn more about best practices? Try these great web sites:
+ DataONE Best Practices
+ UK Data Archive
+ \url{https://libguides.bc.edu/dataplan/best_practices}

  \bibliography{book.bib,packages.bib}

\end{document}
